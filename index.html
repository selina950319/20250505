<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="utf-8" />
    <title>Handpose Test</title>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/p5.js/1.10.0/p5.min.js"></script>
    <script src="https://unpkg.com/ml5@latest/dist/ml5.min.js"></script>
    <style>
      body {
        margin: 0;
        padding: 0;
        overflow: hidden;
      }
      canvas {
        display: block;
      }
    </style>
  </head>
  <body>
    <script>
      let video;
      let handposeModel;
      let predictions = [];

      function setup() {
        createCanvas(640, 480);
        video = createCapture(VIDEO, () => {
          console.log("ðŸ“· æ”å½±æ©Ÿå•Ÿå‹•æˆåŠŸ");
        });
        video.size(640, 480);
        video.hide();

        handposeModel = ml5.handpose(video, () => {
          console.log("âœ‹ Handpose æ¨¡åž‹è¼‰å…¥æˆåŠŸ");
        });

        handposeModel.on("predict", (results) => {
          predictions = results;
        });
      }

      function draw() {
        background(0);
        image(video, 0, 0);

        for (let i = 0; i < predictions.length; i++) {
          const prediction = predictions[i];
          for (let j = 0; j < prediction.landmarks.length; j++) {
            const [x, y] = prediction.landmarks[j];
            fill(0, 255, 0);
            noStroke();
            ellipse(x, y, 10, 10);
          }
        }
      }
    </script>
  </body>
</html>
